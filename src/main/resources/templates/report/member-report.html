<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout}">
<head>
    <title>My Report</title>
</head>
<body>
<div th:fragment="content">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>üìä My Monthly Report</h2>
    </div>

    <div style="margin-bottom: 20px;">
        <form th:action="@{/reports/my-report}" method="get" style="display: flex; gap: 10px; align-items: center;">
            <label>Month:</label>
            <select name="month" th:value="${selectedMonth}">
                <option th:each="m : ${#numbers.sequence(1, 12)}"
                        th:value="${m}"
                        th:text="${m}"
                        th:selected="${m == selectedMonth}">1</option>
            </select>

            <label>Year:</label>
            <select name="year" th:value="${selectedYear}">
                <option th:each="y : ${#numbers.sequence(2020, 2030)}"
                        th:value="${y}"
                        th:text="${y}"
                        th:selected="${y == selectedYear}">2024</option>
            </select>

            <button type="submit" class="btn">View Report</button>
        </form>
    </div>

    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
        <h3 style="font-size: 28px; margin-bottom: 10px;" th:text="${member.name}">Your Name</h3>
        <p style="opacity: 0.9;">Report for <span th:text="${selectedMonth}">Month</span>/<span th:text="${selectedYear}">Year</span></p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
            <h4 style="color: #667eea; margin-bottom: 10px;">üí∞ Regular Expenses</h4>
            <p style="font-size: 24px; font-weight: bold;">‡ß≥<span th:text="${#numbers.formatDecimal(report.regularShare, 1, 2)}">0.00</span></p>
            <p style="color: #666; font-size: 14px;">Rent, bills, groceries</p>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
            <h4 style="color: #667eea; margin-bottom: 10px;">üçΩÔ∏è Meal Expenses</h4>
            <p style="font-size: 24px; font-weight: bold;">‡ß≥<span th:text="${#numbers.formatDecimal(report.mealShare, 1, 2)}">0.00</span></p>
            <p style="color: #666; font-size: 14px;">You ate <span th:text="${report.totalMeals}">0</span> meals</p>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
            <h4 style="color: #667eea; margin-bottom: 10px;">üí∏ You Paid</h4>
            <p style="font-size: 24px; font-weight: bold; color: #dc3545;">‡ß≥<span th:text="${#numbers.formatDecimal(report.individualPaid, 1, 2)}">0.00</span></p>
            <p style="color: #666; font-size: 14px;">Expenses covered by you</p>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
            <h4 style="color: #667eea; margin-bottom: 10px;">üí∞ You Collected</h4>
            <p style="font-size: 24px; font-weight: bold; color: #28a745;">‡ß≥<span th:text="${#numbers.formatDecimal(report.totalCollected, 1, 2)}">0.00</span></p>
            <p style="color: #666; font-size: 14px;">Amount deposited</p>
        </div>
    </div>

    <div style="background: white; border: 3px solid; padding: 30px; border-radius: 10px;"
         th:style="${report.finalBalance > 0} ? 'border-color: #dc3545; background: #f8d7da;' :
                       ${report.finalBalance < 0} ? 'border-color: #28a745; background: #d4edda;' :
                       'border-color: #17a2b8; background: #d1ecf1;'">
        <h3 th:if="${report.finalBalance > 0}" style="color: #721c24;">‚ö†Ô∏è You Owe the Mess</h3>
        <h3 th:if="${report.finalBalance < 0}" style="color: #155724;">‚úÖ Mess Owes You</h3>
        <h3 th:if="${report.finalBalance == 0}" style="color: #0c5460;">‚úÖ All Clear!</h3>

        <p style="font-size: 42px; font-weight: bold; margin-top: 15px;"
           th:style="${report.finalBalance > 0} ? 'color: #721c24;' :
                         ${report.finalBalance < 0} ? 'color: #155724;' : 'color: #0c5460;'">
            ‡ß≥<span th:text="${#numbers.formatDecimal(#numbers.abs(report.finalBalance), 1, 2)}">0.00</span>
        </p>
    </div>
</div>
</body>
</html>